<div class="grid-dashboard">
  
  <div class="card flex justify-content-between align-items-center mb-0">
    <div>
      <span class="block text-500 font-medium mb-3">Faturamento (Hoje)</span>
      <div class="text-900 font-bold text-3xl">{{ faturamentoHoje | currency:'BRL' }}</div>
    </div>
    <div class="flex align-items-center justify-content-center bg-green-100 border-round" style="width:3.5rem;height:3.5rem">
      <i class="pi pi-money-bill text-green-600 text-2xl"></i>
    </div>
  </div>

  <div class="card flex justify-content-between align-items-center mb-0">
    <div>
      <span class="block text-500 font-medium mb-3">Vendas Realizadas</span>
      <div class="text-900 font-bold text-3xl">{{ vendasHojeCount }}</div>
      <!--span class="text-500 text-sm">transações hoje</span-->
    </div>
    <div class="flex align-items-center justify-content-center bg-blue-100 border-round" style="width:3.5rem;height:3.5rem">
      <i class="pi pi-shopping-cart text-blue-600 text-2xl"></i>
    </div>
  </div>

  <div class="card flex justify-content-between align-items-center mb-0">
    <div>
      <span class="block text-500 font-medium mb-3">Estoque Crítico</span>
      <div class="text-900 font-bold text-3xl">{{ produtosBaixoEstoqueCount }}</div>
      <span class="text-orange-500 text-sm font-medium">Produtos com menos de 5 unidades.</span>
    </div>
    <div class="flex align-items-center justify-content-center bg-orange-100 border-round" style="width:3.5rem;height:3.5rem">
      <i class="pi pi-exclamation-triangle text-orange-600 text-2xl"></i>
    </div>
  </div>
</div>

<div class="card mt-4 border-none shadow-2">
    <div class="flex justify-content-between align-items-center mb-3">
        <h3 class="m-0 text-700">Últimas Vendas</h3>
        <p-button icon="pi pi-refresh" [rounded]="true" [text]="true" (onClick)="carregarDados()" pTooltip="Atualizar"></p-button>
    </div>
    
    <p-table [value]="ultimasVendas" [rows]="5" styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
            <tr>
                <th>ID</th>
                <th>Data/Hora</th>
                <th>Operador</th>
                <th>Total</th>
                <th>Status</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-venda>
            <tr>
                <td class="font-bold">#{{ venda.id }}</td>
                <td>{{ venda.dataHora | date:'dd/MM/yy HH:mm' }}</td>
                <td>
                    <div class="flex align-items-center gap-2">
                        <i class="pi pi-user text-primary"></i>
                        <span>{{ venda.usuario?.nomeCompleto }}</span>
                    </div>
                </td>
                <td class="text-green-600 font-medium">{{ venda.valorTotal | currency:'BRL' }}</td>
                <td><span class="p-tag p-tag-success">Concluído</span></td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5" class="text-center p-4">Nenhuma venda registrada recentemente.</td>
            </tr>
        </ng-template>
    </p-table>
</div>